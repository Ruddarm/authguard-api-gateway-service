spring:
  cloud:
    gateway:
      server:
        webflux:
          globalcors:
            corsConfigurations:
              "[/**]":
                allowed-origins:
                  - "http://localhost:5173"
                  - "http://localhost:8081"
                allowed-methods:
                  - GET
                  - GET
                  - POST
                  - PUT
                  - DELETE
                  - OPTIONS
                allowed-headers:
                  - "*"
                max-age:
                  - 3600L
                allow-credentials: true
          routes:
          - id: "authguard-user-public-service"
            uri: lb://AUTHGUARD-USER-SERVICE
            predicates:
              - Path=/api/v1/auth/user/**
            filters:
              - StripPrefix=2
              - UserFilter
          - id: "authguard-user-private-service"
            uri: lb://AUTHGUARD-USER-SERVICE
            predicates:
              - Path=/api/v1/user/**
            filters:
              - StripPrefix=2
              - UserFilter
              - name: AuthenticationFilter
                args:
                  enabled: true
          - id: "authguard-app-service"
            uri: lb://AUTHGUARD-APP-SERVICE
            predicates:
              - Path=/api/v1/apps/**
            filters:
              - StripPrefix=2
              - name: AuthenticationFilter
                args:
                  enabled: true
          - id: "authguard-client-public-service"
            uri: lb://AUTHGUARD-CLIENT-SERVICE
            predicates:
              - Path=/api/v1/auth/client/**
            filters:
              - StripPrefix=3
          - id: "authguard-client-service"
            uri: lb://AUTHGUARD-CLIENT-SERVICE
            predicates:
              - Path=/api/v1/client/**
            filters:
              - StripPrefix=2
              - name: AuthenticationFilter
                args:
                  enabled: true
          - id: "authguard-oauth2-service"
            uri: lb://AUTHGUARD-OAUTH2-SERVICE
            predicates:
              - Path=/api/v1/oauth2/**
            filters:
              - StripPrefix=2
          - id: "authguard-oauth2-service-well-known"
            uri: lb://AUTHGUARD-OAUTH2-SERVICE
            predicates:
              - Path=/api/v1/.well-known/**
            filters:
              - StripPrefix=2
